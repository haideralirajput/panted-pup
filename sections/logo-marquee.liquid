{% comment %}
  Logo Marquee / Trust Section
{% endcomment %}

<section class="logo-marquee-section" id="logo-marquee-{{ section.id }}">
  {% if section.settings.heading != blank %}
    <h2 class="logo-marquee-heading">
      {{ section.settings.heading }}
    </h2>
  {% endif %}

  <div class="logo-marquee-wrapper swiper">
    <div class="swiper-wrapper">
      {% for block in section.blocks %}
        <div class="swiper-slide logo-marquee-slide" {{ block.shopify_attributes }}>
          {% if block.settings.logo != blank %}
            <img
              src="{{ block.settings.logo | image_url: width: 400 }}"
              alt="{{ block.settings.logo.alt | escape }}"
              loading="lazy"
              style="width: {{ block.settings.logo_width }}px;"
            >
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Swiper CDN -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<style>
  .logo-marquee-section {
    padding: 20px 0;
    overflow: hidden;
    background-color: {{ section.settings.section_background }};
  }

  .logo-marquee-heading {
    text-align: center;
    font-size: 22px;
    font-weight: 600;
    margin-bottom: 24px;
  }

  .logo-marquee-wrapper {
    width: 100%;
  }

  .logo-marquee-slide {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 80px;
  }

  .logo-marquee-slide img {
    max-height: 60px;
    object-fit: contain;
    opacity: 0.8;
    transition: opacity 0.3s ease;
  }

  .logo-marquee-slide img:hover {
    opacity: 1;
  }

  @media (max-width: 768px) {
    .logo-marquee-slide {
      height: 60px;
    }

    .logo-marquee-slide img {
      max-height: 45px;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    new Swiper('#logo-marquee-{{ section.id }} .swiper', {
      loop: true,
      slidesPerView: 2,
      spaceBetween: 20,
      speed: {{ section.settings.scroll_speed }},
      autoplay: {
        delay: 0,
        disableOnInteraction: false
      },
      allowTouchMove: true,
      grabCursor: true,
      breakpoints: {
        0: {
          spaceBetween: 24
        },
        768: {
          spaceBetween: 40,
          slidesPerView: 4
        }
      }
    });
  });
</script>

{% schema %}
{
  "name": "Logo Marquee (Trust)",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "As Featured In"
    },
    {
        "type": "color",
        "id": "section_background",
        "label": "Section background",
        "default": "#000000"
    },
    {
      "type": "range",
      "id": "scroll_speed",
      "label": "Scroll Speed",
      "min": 3000,
      "max": 9000,
      "step": 500,
      "default": 8000
    }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "Logo",
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Logo Image"
        },
        {
          "type": "range",
          "id": "logo_width",
          "label": "Logo Width (px)",
          "min": 60,
          "max": 240,
          "step": 5,
          "default": 120
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Logo Marquee (Trust)",
      "blocks": [
        { "type": "logo" },
        { "type": "logo" },
        { "type": "logo" }
      ]
    }
  ]
}
{% endschema %}
